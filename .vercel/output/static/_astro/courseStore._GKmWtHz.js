let l=[],n=0;const f=4;let a=o=>{let i=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(t){return e.lc=i.push(t),()=>{for(let u=n+f;u<l.length;)l[u]===t?l.splice(u,f):u+=f;let s=i.indexOf(t);~s&&(i.splice(s,1),--e.lc||e.off())}},notify(t,s){let u=!l.length;for(let c of i)l.push(c,e.value,t,s);if(u){for(n=0;n<l.length;n+=f)l[n](l[n+1],l[n+2],l[n+3]);l.length=0}},off(){},set(t){let s=e.value;s!==t&&(e.value=t,e.notify(s))},subscribe(t){let s=e.listen(t);return t(e.value),s},value:o};return e};const d=a(""),r=a({token:"",courseId:"",lessionId:"",videoId:"",pos:""});function p(o){d.set(o)}function v(o,i){r.set({...r.get(),[o]:i})}export{a,d as c,p as s,r as t,v as u};
