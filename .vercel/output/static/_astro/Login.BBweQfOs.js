import{a as A}from"./runtime-dom.esm-bundler.Cz-NaV3a.js";import{E as P,F as U,a as j}from"./index.esm.Chc3UFwl.js";import{l as B}from"./auth.z8zRmViH.js";import{c as k,d as y}from"./authQueries.BcGoVAi4.js";import{s as m}from"./localStorageUtils.BuRq4_r3.js";import{i as G,g as R,G as T,b as D,a as C,c as I}from"./config.CyDGhkV7.js";import{_ as O}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as S,a as o,b as g,w as M,r as h,o as L,d as V,e as z,t as E,f as W}from"./runtime-core.esm-bundler.BJGitzCl.js";import"./_commonjsHelpers.D6-XlEtG.js";import"./client.D6J25A0q.js";const J={apiKey:"AIzaSyBa_nvuocb7atvfwioFA2LNJMZBkL2rc2w",authDomain:"pcc-mobile-app-84266.firebaseapp.com",projectId:"pcc-mobile-app-84266",storageBucket:"pcc-mobile-app-84266.appspot.com",messagingSenderId:"30873318956",appId:"1:30873318956:web:35aae1bc2cc6c97ac18389",measurementId:"G-1572PJXEVT"},N=G(J),K=R(N),F=async()=>{try{const n=new T;return n.setCustomParameters({prompt:"select_account"}),(await D(K,n)).user}catch(n){throw console.error("Google Sign-In Error:",n),n}};/*! js-cookie v3.0.5 | MIT */function x(n){for(var e=1;e<arguments.length;e++){var l=arguments[e];for(var t in l)n[t]=l[t]}return n}var X={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function w(n,e){function l(s,d,r){if(!(typeof document>"u")){r=x({},e,r),typeof r.expires=="number"&&(r.expires=new Date(Date.now()+r.expires*864e5)),r.expires&&(r.expires=r.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var u="";for(var a in r)r[a]&&(u+="; "+a,r[a]!==!0&&(u+="="+r[a].split(";")[0]));return document.cookie=s+"="+n.write(d,s)+u}}function t(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var d=document.cookie?document.cookie.split("; "):[],r={},u=0;u<d.length;u++){var a=d[u].split("="),v=a.slice(1).join("=");try{var p=decodeURIComponent(a[0]);if(r[p]=n.read(v,p),s===p)break}catch{}}return s?r[s]:r}}return Object.create({set:l,get:t,remove:function(s,d){l(s,"",x({},d,{expires:-1}))},withAttributes:function(s){return w(this.converter,x({},this.attributes,s))},withConverter:function(s){return w(x({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var _=w(X,{path:"/"});const Y={__name:"Login",setup(n,{expose:e}){e();const l=h(!1),t=h(""),s=h(!1),d=()=>{window.location.href="/auth/phone-signon"},r=(c,i)=>{_.set(c,i,{expires:30,path:"/",secure:!0,sameSite:"Strict"})},u=async c=>{t.value="",console.log("Submitted values:",c);try{l.value=!0;const i=await y(c);i?.data?.access_token&&i?.data?.user&&(m("token",i?.data?.access_token),m("user",i?.data?.user),r("token",i?.data?.access_token),setTimeout(()=>window.location.href="/",2e3)),l.value=!1}catch(i){l.value=!1,t.value=i?.response?.data?i.response.data?.message||"Something went wrong.":"Unexpected error occurred."}};let a=!1;const b={loading:l,submitError:t,remember:s,goToPhoneLogin:d,setCookie:r,onSubmit:u,get signingIn(){return a},set signingIn(c){a=c},handleGoogleLogin:async()=>{if(console.log("Google"),!a){a=!0;try{await I(C);const i=await(await F()).getIdToken(),f=await k(i);f?.data?.access_token&&f?.data?.user&&(m("token",f?.data?.access_token),m("user",f?.data?.user),setTimeout(()=>window.location.href="/",2e3))}catch(c){console.log(c),t.value=c?.response?.data?c.response.data?.message||"Something went wrong.":"Unexpected error occurred."}}},handleFacebookLogin:()=>{},ref:h,get Form(){return j},get Field(){return U},get ErrorMessage(){return P},get loginSchema(){return B},get authLoginApi(){return y},get googleSigninApi(){return k},get setItem(){return m},get signInWithGoogle(){return F},get signOut(){return I},get auth(){return C},get Cookies(){return _}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},Z={class:"bg-blue-300 p-8 rounded shadow-lg w-full max-w-md"},q={class:"flex items-center gap-2"},H={key:0,class:"text-red-600 text-sm"},Q={type:"submit",class:"btn cursor-pointer"};function $(n,e,l,t,s,d){return L(),S("div",Z,[e[10]||(e[10]=o("h1",{class:"text-xl font-bold mb-4 text-center"},"Login Form",-1)),g(t.Form,{onSubmit:t.onSubmit,"validation-schema":t.loginSchema,class:"space-y-4"},{default:M(()=>[o("div",null,[e[1]||(e[1]=o("label",{class:"block text-sm mb-1"},"Enter your Email:",-1)),g(t.Field,{name:"email",type:"email",class:"input",placeholder:"you@example.com"}),g(t.ErrorMessage,{name:"email",class:"text-red-500 text-sm mt-1"})]),o("div",null,[e[2]||(e[2]=o("label",{class:"block text-sm mb-1"},"Enter your Password:",-1)),g(t.Field,{name:"password",type:"password",class:"input",placeholder:"Enter Your Password"}),g(t.ErrorMessage,{name:"password",class:"text-red-500 text-sm mt-1"})]),o("div",q,[z(o("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=r=>t.remember=r)},null,512),[[A,t.remember]]),e[3]||(e[3]=o("label",null,"Remember me",-1))]),t.submitError?(L(),S("div",H,E(t.submitError),1)):V("",!0),o("button",Q,E(t.loading?"LogginIn....":"Login"),1),e[7]||(e[7]=o("div",{class:"text-sm text-center mt-2"},[o("a",{href:"/auth/forgot-password",class:"text-blue-600 underline"},"Forget Password")],-1)),e[8]||(e[8]=o("div",{class:"text-sm text-center mt-4"},[W(" Don't have an account? "),o("a",{href:"/auth/register",class:"text-blue-600 underline ml-1"},"Sign Up")],-1)),e[9]||(e[9]=o("hr",null,null,-1)),o("div",{class:"mt-2 flex justify-center items center gap-2"},[o("button",{type:"button",class:"w-10 h-10 flex items-center justify-center bg-white rounded-full shadow transform transition duration-200 hover:scale-105",onClick:t.handleGoogleLogin},e[4]||(e[4]=[o("i",{class:"pi pi-google text-xl text-red-600"},null,-1)])),o("button",{type:"button",class:"w-10 h-10 flex items-center justify-center bg-white rounded-full shadow transform transition duration-200 hover:scale-105",onClick:t.handleFacebookLogin},e[5]||(e[5]=[o("i",{class:"pi pi-facebook text-xl text-blue-600"},null,-1)]))]),o("div",{class:"flex flex-col items-center mt-2"},[e[6]||(e[6]=o("span",{class:"text-center"},"OR",-1)),o("span",{onClick:t.goToPhoneLogin,class:"cursor-pointer font-semibold mt-2 bg-gray-200 py-2 px-3 rounded-md"},"Login via Phone")])]),_:1,__:[7,8,9]},8,["validation-schema"])])}const de=O(Y,[["render",$]]);export{de as default};
