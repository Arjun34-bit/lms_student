/* empty css                            */import{V as N}from"./VideoPlayer.D5Bb1Ufo.js";import{t as T,u as h,a as M,s as D}from"./courseStore._GKmWtHz.js";import{_ as v}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{U as F,V as K,W as A,c as n,o,a,d as x,t as g,b as y,Q as j,F as w,g as L,e as E,O as U,w as z,r as c,h as m,f as Q,P as W}from"./runtime-core.esm-bundler.C9CRTELZ.js";import{T as q,v as R}from"./runtime-dom.esm-bundler.BFvuzEM6.js";import{u as f}from"./custom.CNYEwjHG.js";import{g as G}from"./localStorageUtils.BuRq4_r3.js";import{a as H}from"./client.D6J25A0q.js";/* empty css                            */import"./_commonjsHelpers.D6-XlEtG.js";function b(i){let t=F(),s=i.subscribe(e=>{t.value=e});return K()&&A(s),t}const J={__name:"VideoView",props:{lecture:Object,defaultData:Object},setup(i,{expose:t}){t();const s=b(T),e=i,d=j(()=>e.lecture?.videoUrl?e.lecture.videoUrl:e?.defaultData?.videoUrl);console.log(s.value);const r={$timeStamp:s,props:e,videoUrl:d,handleVideoPosition:l=>{h("videoId",e?.lecture.value?.id),h("pos",l)},computed:j,VideoPlayer:N,get useStore(){return b},get timeStamp(){return T},get updateKey(){return h}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},X={key:0},Y={class:"text-2xl font-bold mb-4"},Z={key:0},ee={key:1,class:"flex justify-center items-center h-screen"};function te(i,t,s,e,d,u){return s.lecture?(o(),n("div",X,[a("h2",Y,g(s.lecture.title||e.props?.defaultData?.title),1),e.videoUrl?(o(),n("div",Z,[y(e.VideoPlayer,{videoUrl:e.videoUrl,type:"lecture",onUpdatePosition:e.handleVideoPosition},null,8,["videoUrl"])])):x("",!0)])):(o(),n("div",ee,t[0]||(t[0]=[a("span",null,[a("i",{class:"pi pi-spin pi-spinner",style:{"font-size":"4rem",color:"blue"}})],-1)])))}const re=v(J,[["render",te]]),oe={},se={class:"animate-pulse space-y-4 p-4 bg-white rounded-md shadow-md"};function ne(i,t){return o(),n("div",se,t[0]||(t[0]=[a("div",{class:"h-6 bg-gray-100 rounded w-3/4"},null,-1)]))}const ae=v(oe,[["render",ne]]),S=M(!1);function k(i){S.set(i)}const ie={__name:"LectureModule",props:{lectures:Object,videos:Array,selectedLecture:Object},emits:["select"],setup(i,{expose:t,emit:s}){t();const e=i,d=s,u=b(S),r=c(new Set),l=c(e?.lectures),_=c(e?.videos),P=p=>{f("lessionId",p),r.value.has(p)?r.value.delete(p):r.value.add(p)},$=p=>{for(const O of _.value){const C=O.Videos.find(B=>B.id===p);if(C){d("select",C);return}return null}};m(()=>{f("lessionId",l.value[0]?.id)});const V={props:e,emit:d,$loading:u,expandedLessons:r,lessions:l,videos:_,toggleLesson:P,handleVideo:$,onMounted:m,ref:c,CardSkeleton:ae,get isLoading(){return S},get useStore(){return b},get updateKey(){return f}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}},le={key:0,class:"text-gray-400 italic"},de={key:1},ce={class:"space-y-2"},ue=["on:click"],_e={key:0,class:"px-4 pb-4 bg-gray-50 dark:bg-gray-900 text-gray-700 dark:text-gray-300"},pe={class:"space-y-2 mt-2"},me=["onClick"];function fe(i,t,s,e,d,u){return o(),n("div",null,[t[2]||(t[2]=a("h2",{class:"text-lg font-semibold mb-4 text-gray-200"},"Lectures",-1)),e.$loading?(o(),n("div",le,[y(e.CardSkeleton)])):(o(),n("div",de,[a("ul",ce,[(o(!0),n(w,null,L(e.lessions,r=>(o(),n("li",{key:r.id,class:"border border-gray-300 dark:border-gray-700 rounded overflow-hidden bg-white dark:bg-gray-800"},[a("button",{class:"w-full flex justify-between items-center p-4 text-left text-lg font-medium text-gray-800 dark:text-gray-200 focus:outline-none","on:click":l=>e.toggleLesson(r.id)},[E(g(r.lectureName)+" ",1),(o(),n("svg",{class:U(["w-5 h-5 transform transition-transform",e.expandedLessons.has(r.id)?"rotate-180":""]),fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},t[0]||(t[0]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 9l-7 7-7-7"},null,-1)]),2))],40,ue),y(q,{name:"accordion"},{default:z(()=>[e.expandedLessons.has(r.id)?(o(),n("div",_e,[a("ul",pe,[(o(!0),n(w,null,L(r.Videos||[],l=>(o(),n("li",{key:l.id,onClick:_=>e.handleVideo(l.id),class:"p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition flex justify-between items-center"},[a("p",null,g(l.title),1),t[1]||(t[1]=a("i",{class:"pi pi-lock"},null,-1))],8,me))),128))])])):x("",!0)]),_:2},1024)]))),128))])]))])}const ge=v(ie,[["render",fe]]),ye={__name:"LectureTabs",props:{lecture:Object,defaultDescription:String},setup(i,{expose:t}){t();const s=i,e=["Notes","Summary","Q&A"],d=c("Notes"),u=c(""),r=c(s.lecture?.description),l={props:s,tabs:e,activeTab:d,notes:u,summary:r,ref:c};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},ve={class:"mt-6 w-full"},be={class:"flex border-b dark:border-gray-700"},xe=["onClick"],he={class:"mt-4"},ke={key:0},we={key:1},Le={class:"text-gray-700 dark:text-gray-300"},Se={key:2};function Ve(i,t,s,e,d,u){return o(),n("div",ve,[a("div",be,[(o(),n(w,null,L(e.tabs,r=>a("button",{key:r,onClick:l=>e.activeTab=r,class:U(["py-2 px-4 text-sm font-medium border-b-2 transition-all duration-200",[e.activeTab===r?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-600 dark:text-gray-300 hover:text-blue-500"]])},g(r),11,xe)),64))]),a("div",he,[e.activeTab==="Notes"?(o(),n("div",ke,[Q(a("textarea",{"onUpdate:modelValue":t[0]||(t[0]=r=>e.notes=r),placeholder:"Write your notes here...",rows:"6",class:"w-full p-3 border rounded-md dark:bg-gray-800 dark:border-gray-600 dark:text-white"},null,512),[[R,e.notes]])])):e.activeTab==="Summary"?(o(),n("div",we,[a("p",Le,g(e.summary?e.summary:s.defaultDescription),1)])):e.activeTab==="Q&A"?(o(),n("div",Se,t[1]||(t[1]=[a("p",{class:"text-gray-500 dark:text-gray-400 italic"},"Coming soon...",-1)]))):x("",!0)])])}const Ce=v(ye,[["render",Ve]]),Te=void 0,De=G("token"),I=async i=>{try{return(await H.get(`${Te}/student/enrolled-course/single`,{headers:{Authorization:`Bearer ${De}`,"Content-Type":"application/json"}},{courseId:i}))?.data?.data}catch(t){throw console.log(t),new Error("Course Fetching Failed")}},je={__name:"CourseView",props:{courseId:{type:String,required:!0}},setup(i,{expose:t}){t();const s=i,e=c(null),d=c(null),u=c(null),r=_=>{u.value=_||d};m(()=>{r(null)}),m(async()=>{try{k(!0),e.value=await I(s?.courseId),d.value=e.value?.lessons[0]?.Videos[0],f("courseId",e.value?.course?.id),D(e?.value?.course?.title)}catch(_){console.error("Failed to load course:",_)}finally{k(!1)}});const l={props:s,course:e,defaultData:d,selectedLecture:u,setSelectedLecture:r,ref:c,onMounted:m,VideoView:re,LectureModule:ge,LectureTabs:Ce,get getEnrolledCourseById(){return I},get setCourseTitle(){return D},get setIsLoading(){return k},get updateKey(){return f}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}},Ie={class:"flex flex-col md:flex-row min-h-screen"},Ue={class:"w-full md:w-1/4 bg-gray-100 dark:bg-gray-800 p-4 border-r dark:border-gray-700"},Pe={class:"flex-1 overflow-y-auto p-4 bg-white dark:bg-gray-900 text-gray-900 dark:text-white"};function $e(i,t,s,e,d,u){return o(),n("div",Ie,[a("aside",Ue,[e.course?.course?.CourseLession?(o(),W(e.LectureModule,{key:0,lectures:e.course?.course?.CourseLession,videos:e.course?.lessons,selectedLecture:e.selectedLecture,onSelect:e.setSelectedLecture},null,8,["lectures","videos","selectedLecture"])):x("",!0)]),a("main",Pe,[y(e.VideoView,{lecture:e.selectedLecture,defaultData:e.defaultData},null,8,["lecture","defaultData"]),y(e.LectureTabs,{lecture:e.selectedLecture,defaultDescription:e.defaultData?.description},null,8,["lecture","defaultDescription"])])])}const qe=v(je,[["render",$e]]);export{qe as default};
