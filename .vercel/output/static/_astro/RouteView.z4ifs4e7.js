import{_ as g}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as i,o as l,r as u,h as w,a as t,F as y,g as S,t as c,e as b,b as m,w as I,P as T,X as j,Q as F}from"./runtime-core.esm-bundler.lqNYk3e-.js";import{c as E,b as v,u as C,E as M,F as P,a as J}from"./index.esm.CQ8eLs3I.js";import{g as x,s as h}from"./localStorageUtils.BuRq4_r3.js";import{a as B}from"./client.D6J25A0q.js";import{g as k,f as L,c as $}from"./custom.CNYEwjHG.js";import"./_commonjsHelpers.D6-XlEtG.js";import"./courseStore._GKmWtHz.js";const N={};function V(n,s){return l(),i("h1",null,"This is Dashboard Page")}const q=g(N,[["render",V]]),R=E({name:v().required("name is required"),classID:v().required("classId is required")}),U=void 0,A=x("token"),O=async()=>{try{return(await B.get(`${U}/student/live-classes`,{headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"}})).data}catch(n){console.log(n)}};function f(){const n=u([]),s=u(!0),o=u(null),e=async()=>{try{s.value=!0;const a=await O();n.value=a.data}catch(a){o.value=a}finally{s.value=!1}};return w(e),{liveClasses:n,isLoading:s,error:o,refetch:e}}const z={__name:"MeetTable",setup(n,{expose:s}){s();const{liveClasses:o,isLoading:e}=f();console.log(o);const a={liveClasses:o,isLoading:e,get useLiveClasses(){return f},get checkIfLiveClass(){return $},get formatDate(){return L},get getStatusColor(){return k}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},Q={class:"mt-8 overflow-x-auto"},X={class:"min-w-full bg-white border rounded-md"},Y={class:"px-4 py-2"},G={class:"px-4 py-2"},H={class:"px-4 py-2"},K={class:"px-4 py-2"},W={class:"px-4 py-2"},Z=["onClick"],ee={key:1,class:"text-black font-bold px-4 py-1 rounded-md"};function te(n,s,o,e,a,d){return l(),i("div",Q,[t("table",X,[s[0]||(s[0]=t("thead",null,[t("tr",{class:"bg-gray-100 text-left text-sm font-medium text-gray-600"},[t("th",{class:"px-4 py-2 border-b"},"#"),t("th",{class:"px-4 py-2 border-b"},"Meet Title"),t("th",{class:"px-4 py-2 border-b"},"Course Title"),t("th",{class:"px-4 py-2 border-b"},"Start Time"),t("th",{class:"px-4 py-2 border-b"},"End Time"),t("th",{class:"px-4 py-2 border-b"},"Join")])],-1)),t("tbody",null,[(l(!0),i(y,null,S(e.liveClasses,(r,p)=>(l(),i("tr",{key:r?.id,class:"text-sm text-gray-700 hover:bg-gray-50"},[t("td",Y,c(p+1),1),t("td",G,c(r.title),1),t("td",H,c(r.course?.title||"-"),1),t("td",K,c(e.formatDate(r.startTime)),1),t("td",W,c(e.formatDate(r.endTime)),1),t("td",null,[e.checkIfLiveClass(r.startTime,r.endTime)?(l(),i("button",{key:0,"<!--":"",onClick:_=>n.joinLiveClass(r.id),"--":""},' class="bg-blue-500 text-white px-4 py-1 rounded-md" > Join ',8,Z)):(l(),i("span",ee," Soon... "))])]))),128))])])])}const se=g(z,[["render",te]]),re={__name:"MeetingCard",setup(n,{expose:s}){s();const{liveClasses:o,isLoading:e}=f(),d={liveClasses:o,isLoading:e,joinLiveClass:r=>{console.log("Joining class with ID:",r)},get useLiveClasses(){return f},get checkIfLiveClass(){return $},get formatDate(){return L},get getStatusColor(){return k}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},ne={class:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},oe={class:"text-lg font-semibold text-gray-800"},ae={class:"text-sm text-gray-600 mt-1"},le={class:"mt-2 text-sm text-gray-600"},ie={class:"mt-4"},ce=["onClick"],de={key:1,class:"block text-center text-gray-500 font-semibold border border-gray-300 rounded-md py-2"};function ue(n,s,o,e,a,d){return l(),i("div",ne,[(l(!0),i(y,null,S(e.liveClasses,(r,p)=>(l(),i("div",{key:r?.id,class:"bg-white border shadow rounded-lg p-4 flex flex-col justify-between min-h-[250px]"},[t("div",null,[t("h2",oe,c(r.title||"Untitled Meet"),1),t("p",ae,[s[0]||(s[0]=t("span",{class:"font-medium"},"Course:",-1)),b(" "+c(r.course?.title||"-"),1)]),t("div",le,[t("p",null,[s[1]||(s[1]=t("span",{class:"font-medium"},"Start:",-1)),b(" "+c(e.formatDate(r.startTime)),1)]),t("p",null,[s[2]||(s[2]=t("span",{class:"font-medium"},"End:",-1)),b(" "+c(e.formatDate(r.endTime)),1)])])]),t("div",ie,[e.checkIfLiveClass(r.startTime,r.endTime)?(l(),i("button",{key:0,onClick:_=>e.joinLiveClass(r.id),class:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition"}," Join ",8,ce)):(l(),i("span",de," Soon... "))])]))),128))])}const me=g(re,[["render",ue]]),pe={__name:"Classes",setup(n,{expose:s}){s();const o=u(!1),e=u(""),{handleSubmit:a}=C({}),d=x("user"),p={loading:o,submitError:e,handleSubmit:a,user:d,onSubmit:(_,{resetForm:D})=>{e.value="",console.log("hello");try{o.value=!0,h("userName",_.name),h("meetingId",_.classID),window.location.href="/meetings",D()}catch{e.value="Failed to join meeting. Please try again."}finally{o.value=!1}},ref:u,get Form(){return J},get Field(){return P},get ErrorMessage(){return M},get useForm(){return C},get joinSchema(){return R},ClassTable:se,get getItem(){return x},get setItem(){return h},MeetingCard:me};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}},ge={class:"bg-white p-8 rounded shadow-lg w-full max-w-3xl"},_e={type:"submit",class:"bg-blue-600 text-white px-5 py-2 rounded-md hover:bg-blue-700 transition w-1/3"};function fe(n,s,o,e,a,d){return l(),i(y,null,[t("div",ge,[s[2]||(s[2]=t("h1",{class:"text-xl font-bold mb-4 text-center"},"Join Live Class",-1)),m(e.Form,{onSubmit:e.onSubmit,"validation-schema":e.joinSchema,class:"space-y-4 flex justify-between items-center gap-2"},{default:I(()=>[t("div",null,[s[0]||(s[0]=t("label",{class:"block text-sm mb-1"},"Your Name",-1)),m(e.Field,{name:"name",type:"text",value:e.user?.name||"",class:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer",placeholder:"Enter your name"},null,8,["value"]),m(e.ErrorMessage,{name:"name",class:"text-red-500 text-sm mt-1"})]),t("div",null,[s[1]||(s[1]=t("label",{class:"block text-sm mb-1"},"Class ID",-1)),m(e.Field,{name:"classID",type:"text",class:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter class ID"}),m(e.ErrorMessage,{name:"classID",class:"text-red-500 text-sm mt-1"})]),t("button",_e,c(e.loading?"Joining...":"Join Meet"),1)]),_:1},8,["validation-schema"])]),m(e.MeetingCard)],64)}const be=g(pe,[["render",fe]]),he={name:"RouteView",setup(){const n=u(s());function s(){return new URLSearchParams(window.location.search).get("page")||"dashboard"}const o=F(()=>{switch(n.value){case"classes":return be;case"assignments":return{template:"<div>Assignments Component (placeholder)</div>"};case"settings":return{template:"<div>Settings Component (placeholder)</div>"};case"dashboard":default:return q}}),e=()=>{n.value=s()};return w(()=>{window.addEventListener("popstate",e)}),{currentComponent:o}}};function xe(n,s,o,e,a,d){return l(),T(j(e.currentComponent))}const Ie=g(he,[["render",xe]]);export{Ie as default};
