import{f as v,c as D,d as y,e as C,h as w}from"./courseQueries._IkP52RI.js";import{g as A}from"./localStorageUtils.BuRq4_r3.js";import{_ as P}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as u,o as i,a as t,t as l,f as N,r,h as f,F as k,g as j,O as T,P as B}from"./runtime-core.esm-bundler.BJGitzCl.js";import"./client.D6J25A0q.js";const F="https://developers.elementor.com/docs/assets/img/elementor-placeholder-image.png",L={__name:"CourseCard",props:{course:{type:Object,required:!0}},setup(m,{expose:o}){o();const a=m,e=r(""),d=r(""),c=r(""),s=r(""),p=r(!1),h=()=>{window.location.href="/auth/login"};f(async()=>{try{s.value=A("user");const b=(await v())?.data?.find(n=>n.id===a.course.departmentId);d.value=b?.name||"Unknown",c.value=category?.name||"Unknown"}catch(g){console.error("Failed to fetch department or category:",g)}});const _={props:a,thumbnailSrc:e,defaultThumbnail:F,depName:d,catName:c,userDetails:s,loading:p,redirectToLogin:h,goToCourseDetails:g=>{window.location.href=`/courses/${g}`},ref:r,onMounted:f,get fetchDepartmentsApi(){return v},get fetchSubjectsApi(){return D},get getItem(){return A}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},O=["src"],I={class:"p-4 flex-1 flex flex-col justify-between"},U={class:"text-xl font-semibold mb-1"},R={class:"text-sm text-gray-500 mb-1"},V={class:"text-sm text-gray-600 mb-1 line-clamp-3"},$={class:"text-xs text-gray-500 mt-2"},q={class:"font-medium"},z={class:"font-medium"},E={class:"mt-4 flex items-center justify-between"},M={class:"text-blue-600 font-bold text-sm"};function G(m,o,a,e,d,c){return i(),u("div",{class:"bg-white shadow-md rounded-lg overflow-hidden w-full flex flex-col sm:flex-row",onClick:o[0]||(o[0]=s=>e.goToCourseDetails(a.course?.id))},[t("img",{src:a.course?.thumbnailUrl||e.defaultThumbnail,alt:"Course Thumbnail",class:"w-full sm:w-40 h-40 object-cover"},null,8,O),t("div",I,[t("div",null,[t("h2",U,l(a.course.title),1),t("p",R,"Level: "+l(a.course.level),1),t("p",V,l(a.course.description),1),t("div",$,[t("p",null,[o[1]||(o[1]=N(" Department: ")),t("span",q,l(e.depName||"N/A"),1)]),t("p",null,[o[2]||(o[2]=N(" Subject: ")),t("span",z,l(e.catName||"N/A"),1)])])]),t("div",E,[t("p",M,"â‚¹"+l(a.course.price),1)])])])}const H=P(L,[["render",G]]),J={__name:"index",setup(m,{expose:o}){o();const a=r(null),e=r([]),d=r(),c=r([]),s=r(!1),p=r(1),h=r(10),x=r(1);f(async()=>{try{const n=await y();e.value=n?.data}catch(n){console.error("Failed to fetch categories:",n)}});const _=async()=>{s.value=!0;try{const n=await C();c.value=n?.data}catch(n){console.error("Failed to fetch courses:",n),c.value=[]}finally{s.value=!1}},g=async n=>{d.value=n,c.value="";const S=await w(n);c.value=S?.data?.data?.courses};f(()=>{_()});const b={error:a,categories:e,activeCategory:d,courses:c,loading:s,pageNumber:p,limit:h,totalPages:x,fetchCourses:_,selectCategory:g,ref:r,onMounted:f,CourseCard:H,get getAllCourseApi(){return C},get getCourseByCategoryApi(){return w},get fetchAllCategoriesApi(){return y}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}},K={class:"max-w-5xl mx-auto p-4"},Q={class:"flex gap-4 border-b mb-4"},W=["onClick"],X={class:"flex justify-between items-center mb-4"},Y={class:"text-gray-600"},Z={class:"space-x-2"},ee=["disabled"],te=["disabled"],se={key:0,class:"text-center text-gray-500"},oe={key:1,class:"grid gap-4 grid-cols-[repeat(auto-fit,_minmax(300px,_1fr))]"};function re(m,o,a,e,d,c){return i(),u("div",K,[t("div",Q,[(i(!0),u(k,null,j(e.categories,s=>(i(),u("button",{key:s.id,class:T(["py-2 px-4 font-semibold",e.activeCategory===s.id?"border-b-2 border-blue-500 text-blue-600":"text-gray-600"]),onClick:p=>e.selectCategory(s.id)},l(s.name),11,W))),128))]),t("div",X,[t("div",Y,"Page "+l(e.pageNumber)+" of "+l(e.totalPages),1),t("div",Z,[t("button",{class:"px-3 py-1 border rounded text-sm",disabled:e.pageNumber===1,onClick:o[0]||(o[0]=s=>m.changePage(e.pageNumber-1))}," Prev ",8,ee),t("button",{class:"px-3 py-1 border rounded text-sm",disabled:e.pageNumber===e.totalPages,onClick:o[1]||(o[1]=s=>m.changePage(e.pageNumber+1))}," Next ",8,te)])]),e.loading?(i(),u("div",se,"Loading...")):(i(),u("div",oe,[(i(!0),u(k,null,j(e.courses,s=>(i(),B(e.CourseCard,{key:s.id,course:s},null,8,["course"]))),128))]))])}const de=P(J,[["render",re]]);export{de as default};
